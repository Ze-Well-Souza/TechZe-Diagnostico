import{j as e}from"../vendor/vendor-query.CYtcMPNU.js";import{a}from"../vendor/vendor-react.C0-ekqbG.js";import{k as s,v as t,b as r,c as n,d as i,e as o,a as c,r as l,f as d,L as m,I as h,o as x,j as p,p as g,g as u}from"../entry/index.BTJ1QXK9.js";import{t as j}from"./use-toast.DAVCncE5.js";import{b as f,e as N,d as b,f as y,g as v,h as w,i as D,j as S,k as E,l as k,m as _,n as C}from"../vendor/vendor-utils.Cp7Vw4Xn.js";import{C as M}from"./calendar.C3WoCpfa.js";import{C as A,l as P}from"./index.D5-XNnO7.js";import{C as q}from"./chevron-right.DN28NIWR.js";import{T as $}from"./textarea.Cq5ZZB-C.js";import{U as I}from"./user.DpJFzjjo.js";import{M as H}from"./mail.O52PZRan.js";import{P as T}from"./phone.D-Ty1FlK.js";import{M as O}from"./map-pin.oyh5GQ03.js";import"../vendor/vendor-supabase.CnuDrxPg.js";const V=s("calendar-days",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);const z=new class{formatDate(e){return e.toISOString().split("T")[0]}parseDate(e){return new Date(e+"T00:00:00.000Z")}gerarNumeroAgendamento(){return`AG${Date.now().toString().slice(-6)}${Math.random().toString(36).substring(2,5).toUpperCase()}`}async obterDisponibilidade(e,a){try{const{data:s,error:r}=await t.from("agendamentos").select("data, horario, tecnico_id, tecnicos(nome)").gte("data",this.formatDate(e)).lte("data",this.formatDate(a)).in("status",["agendado","confirmado","em_andamento"]);if(r)throw new Error(`Erro ao buscar agendamentos: ${r.message}`);const{data:n,error:i}=await t.from("configuracao_agendamento").select("*").single(),o=n?.horarios_disponiveis||["08:00","09:00","10:00","11:00","13:00","14:00","15:00","16:00","17:00"],c=[],l=new Date(e);for(;l<=a;){const e=this.formatDate(l);if(0===l.getDay()||6===l.getDay()){l.setDate(l.getDate()+1);continue}const a=new Date;if(a.setHours(0,0,0,0),l<a){l.setDate(l.getDate()+1);continue}const t=s?.filter((a=>a.data===e))||[],r=t.map((e=>e.horario)),n=o.map((e=>{const a=t.find((a=>a.horario===e));return{horario:e,disponivel:!r.includes(e),tecnicoId:a?.tecnico_id,tecnicoNome:a?.tecnicos?.nome}}));c.push({data:e,horarios:n,totalDisponivel:n.filter((e=>e.disponivel)).length}),l.setDate(l.getDate()+1)}return c}catch(s){throw s}}async listarAgendamentos(){try{const{data:e,error:a}=await t.from("agendamentos").select("\n          *,\n          tecnicos(nome)\n        ").order("data",{ascending:!0}).order("horario",{ascending:!0});if(a)throw new Error(`Erro ao listar agendamentos: ${a.message}`);return e?.map((e=>({id:e.id,numero:e.numero,clienteNome:e.cliente_nome,clienteEmail:e.cliente_email,clienteTelefone:e.cliente_telefone,data:this.parseDate(e.data),horario:e.horario,tipoServico:e.tipo_servico,descricaoProblema:e.descricao_problema,equipamento:e.equipamento,status:e.status,tecnicoId:e.tecnico_id,tecnicoNome:e.tecnicos?.nome,criadoEm:new Date(e.created_at)})))||[]}catch(e){throw e}}async criar(e){try{if(!(await this.verificarDisponibilidade(e.data,e.horario)))throw new Error("Hor√°rio n√£o est√° mais dispon√≠vel");const s={numero:this.gerarNumeroAgendamento(),cliente_nome:e.nome,cliente_email:e.email,cliente_telefone:e.telefone,data:this.formatDate(e.data),horario:e.horario,tipo_servico:e.tipoServico,descricao_problema:e.descricaoProblema,equipamento:e.equipamento,status:"agendado"},{data:r,error:n}=await t.from("agendamentos").insert(s).select("\n          *,\n          tecnicos(nome)\n        ").single();if(n)throw new Error(`Erro ao criar agendamento: ${n.message}`);try{await this.enviarNotificacaoAgendamento(r)}catch(a){}return{id:r.id,numero:r.numero,clienteNome:r.cliente_nome,clienteEmail:r.cliente_email,clienteTelefone:r.cliente_telefone,data:this.parseDate(r.data),horario:r.horario,tipoServico:r.tipo_servico,descricaoProblema:r.descricao_problema,equipamento:r.equipamento,status:r.status,tecnicoId:r.tecnico_id,tecnicoNome:r.tecnicos?.nome,criadoEm:new Date(r.created_at)}}catch(s){throw s}}async confirmar(e){try{const{error:a}=await t.from("agendamentos").update({status:"confirmado",confirmado_em:(new Date).toISOString()}).eq("id",e);if(a)throw new Error(`Erro ao confirmar agendamento: ${a.message}`)}catch(a){throw a}}async cancelar(e,a){try{const{error:s}=await t.from("agendamentos").update({status:"cancelado",motivo_cancelamento:a,cancelado_em:(new Date).toISOString()}).eq("id",e);if(s)throw new Error(`Erro ao cancelar agendamento: ${s.message}`)}catch(s){throw s}}async reagendar(e,a,s){try{if(!(await this.verificarDisponibilidade(a,s)))throw new Error("Novo hor√°rio n√£o est√° dispon√≠vel");const{error:r}=await t.from("agendamentos").update({data:this.formatDate(a),horario:s,status:"agendado",reagendado_em:(new Date).toISOString()}).eq("id",e);if(r)throw new Error(`Erro ao reagendar: ${r.message}`)}catch(r){throw r}}async verificarDisponibilidade(e,a){try{const{data:s,error:r}=await t.from("agendamentos").select("id").eq("data",this.formatDate(e)).eq("horario",a).in("status",["agendado","confirmado","em_andamento"]);if(r)throw new Error(`Erro ao verificar disponibilidade: ${r.message}`);return!s||0===s.length}catch(s){throw s}}async obterDetalhes(e){try{const{data:a,error:s}=await t.from("agendamentos").select("\n          *,\n          tecnicos(nome)\n        ").eq("id",e).single();if(s)throw new Error(`Erro ao obter detalhes: ${s.message}`);return{id:a.id,numero:a.numero,clienteNome:a.cliente_nome,clienteEmail:a.cliente_email,clienteTelefone:a.cliente_telefone,data:this.parseDate(a.data),horario:a.horario,tipoServico:a.tipo_servico,descricaoProblema:a.descricao_problema,equipamento:a.equipamento,status:a.status,tecnicoId:a.tecnico_id,tecnicoNome:a.tecnicos?.nome,criadoEm:new Date(a.created_at)}}catch(a){throw a}}async enviarNotificacaoAgendamento(e){}};const F=({dataSelecionada:s,onSelecionarData:t,"datasDispon√≠veis":l=[],className:d=""})=>{const[m,h]=a.useState(new Date),x=f(m),p=N(m),g=b(x,{weekStartsOn:0}),u=y(p,{weekStartsOn:0}),j=v({start:g,end:u}),$=e=>0===l.length?!_(e,new Date)||S(e):l.some((a=>C(e,a)));return e.jsxs(r,{className:`w-full max-w-md ${d}`,children:[e.jsx(n,{className:"pb-3",children:e.jsx(i,{className:"flex items-center justify-between",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"w-5 h-5"}),"Selecionar Data"]})})}),e.jsxs(o,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(c,{variant:"outline",size:"sm",onClick:()=>{h(E(m,1))},className:"h-8 w-8 p-0",children:e.jsx(A,{className:"h-4 w-4"})}),e.jsx("h3",{className:"font-semibold text-sm",children:w(m,"MMMM yyyy",{locale:P})}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>{h(k(m,1))},className:"h-8 w-8 p-0",children:e.jsx(q,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:["Dom","Seg","Ter","Qua","Qui","Sex","S√°b"].map((a=>e.jsx("div",{className:"h-8 flex items-center justify-center text-xs font-medium text-gray-500",children:a},a)))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:j.map((a=>{const r=D(a,m),n=$(a),i=(e=>!!s&&C(e,s))(a),o=S(a);return e.jsx("button",{onClick:()=>(e=>{$(e)&&D(e,m)&&t(e)})(a),disabled:!n||!r,className:`\n                  h-8 w-8 text-xs rounded-md transition-colors\n                  ${r?"":"text-gray-300"}\n                  ${o?"bg-blue-100 text-blue-600 font-semibold":""}\n                  ${i?"bg-blue-600 text-white font-semibold":""}\n                  ${n&&r&&!i&&!o?"hover:bg-gray-100":""}\n                  ${n&&r?"cursor-pointer":"cursor-not-allowed opacity-50"}\n                `,children:w(a,"d")},a.toISOString())}))}),s&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-md",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"Data selecionada:"})," ",w(s,"dd 'de' MMMM 'de' yyyy",{locale:P})]})})]})]})},L=({dataSelecionada:a,horarioSelecionado:s,onSelecionarHorario:t,"horariosDispon√≠veis":m=["08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30"],className:h=""})=>{const x=m.filter((e=>{const a=parseInt(e.split(":")[0]);return a>=8&&a<12})),p=m.filter((e=>{const a=parseInt(e.split(":")[0]);return a>=13&&a<18})),g=a=>{const r=s===a;return e.jsx(c,{variant:r?"default":"outline",size:"sm",onClick:()=>t(a),className:`\n          relative h-10 px-4 transition-all duration-200\n          ${r?"bg-blue-600 text-white":"hover:bg-blue-50 hover:border-blue-300"}\n        `,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(l,{className:"w-3 h-3"}),a,r&&e.jsx(d,{className:"w-3 h-3"})]})},a)};return e.jsxs(r,{className:`w-full max-w-md ${h}`,children:[e.jsxs(n,{className:"pb-3",children:[e.jsxs(i,{className:"flex items-center gap-2",children:[e.jsx(l,{className:"w-5 h-5"}),"Selecionar Hor√°rio"]}),e.jsx("p",{className:"text-sm text-gray-600",children:w(a,"dd 'de' MMMM 'de' yyyy",{locale:P})})]}),e.jsxs(o,{className:"space-y-6",children:[x.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:"üåÖ Manh√£"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:x.map(g)})]}),p.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:"‚òÄÔ∏è Tarde"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:p.map(g)})]}),s&&e.jsx("div",{className:"mt-4 p-3 bg-green-50 rounded-md border border-green-200",children:e.jsxs("p",{className:"text-sm text-green-700 flex items-center gap-2",children:[e.jsx(d,{className:"w-4 h-4"}),e.jsx("strong",{children:"Hor√°rio selecionado:"})," ",s]})}),0===m.length&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(l,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"N√£o h√° hor√°rios dispon√≠veis para esta data."})]})]})]})},Q=({onSubmit:s,onVoltar:t,loading:l=!1,className:d=""})=>{const[x,p]=a.useState({nome:"",email:"",telefone:"",descricaoProblema:""});return e.jsxs(r,{className:`w-full max-w-2xl ${d}`,children:[e.jsx(n,{children:e.jsxs(i,{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-5 h-5"}),"Dados do Cliente"]})}),e.jsx(o,{children:e.jsxs("form",{onSubmit:e=>{e.preventDefault(),s(x)},className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"nome",children:"Nome Completo *"}),e.jsx(h,{id:"nome",value:x.nome,onChange:e=>p((a=>({...a,nome:e.target.value}))),placeholder:"Seu nome completo"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"email",children:"Email *"}),e.jsx(h,{id:"email",type:"email",value:x.email,onChange:e=>p((a=>({...a,email:e.target.value}))),placeholder:"seu@email.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"telefone",children:"Telefone *"}),e.jsx(h,{id:"telefone",value:x.telefone,onChange:e=>p((a=>({...a,telefone:e.target.value}))),placeholder:"(11) 99999-9999"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"descricaoProblema",children:"Descri√ß√£o do Problema *"}),e.jsx($,{id:"descricaoProblema",value:x.descricaoProblema,onChange:e=>p((a=>({...a,descricaoProblema:e.target.value}))),placeholder:"Descreva o problema...",rows:4})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(c,{type:"button",variant:"outline",onClick:t,disabled:l,className:"flex-1",children:"Voltar"}),e.jsx(c,{type:"submit",disabled:l,className:"flex-1",children:l?"Criando Agendamento...":"Finalizar Agendamento"})]})]})})]})},B=({agendamento:a,onNovoAgendamento:s,onVoltar:t,className:m=""})=>e.jsxs(r,{className:`w-full max-w-2xl ${m}`,children:[e.jsxs(n,{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(d,{className:"w-8 h-8 text-green-600"})})}),e.jsx(i,{className:"text-2xl text-green-600",children:"Agendamento Confirmado!"}),e.jsx("p",{className:"text-gray-600",children:"Seu agendamento foi criado com sucesso. Voc√™ receber√° uma confirma√ß√£o por email."})]}),e.jsxs(o,{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-blue-900 mb-3 flex items-center gap-2",children:[e.jsx(M,{className:"w-5 h-5"}),"Data e Hor√°rio"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(M,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:w(a.data,"dd 'de' MMMM 'de' yyyy",{locale:P})})]}),e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(l,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:a.horario})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(I,{className:"w-5 h-5"}),"Dados do Cliente"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(I,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-gray-700",children:a.cliente.nome})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(H,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-gray-700",children:a.cliente.email})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(T,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-gray-700",children:a.cliente.telefone})]})]})]}),e.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-yellow-900 mb-3",children:"Descri√ß√£o do Problema"}),e.jsx("p",{className:"text-yellow-700 text-sm leading-relaxed",children:a.cliente.descricaoProblema})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-green-900 mb-3",children:"Pr√≥ximos Passos"}),e.jsxs("ul",{className:"text-green-700 text-sm space-y-2",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(d,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Voc√™ receber√° um email de confirma√ß√£o com todos os detalhes"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(d,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Nosso t√©cnico entrar√° em contato 1 dia antes do agendamento"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(d,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Prepare o equipamento e mantenha-o acess√≠vel"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(d,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Tenha em m√£os qualquer documenta√ß√£o relevante do problema"})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(c,{variant:"outline",onClick:t,className:"flex-1",children:"Voltar"}),e.jsx(c,{onClick:s,className:"flex-1",children:"Novo Agendamento"})]}),e.jsxs("div",{className:"border-t pt-4 text-center",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Precisa alterar ou cancelar? Entre em contato conosco:"}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"üìû (11) 99999-9999"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"‚úâÔ∏è contato@techze.com.br"})]})]})]})]}),G=()=>{const{disponibilidade:s,loading:t,error:m,carregarDisponibilidade:h,criarAgendamento:f}=function(e={}){const{autoLoad:s=!0,diasAntecedencia:t=30}=e,[r,n]=a.useState([]),[i,o]=a.useState([]),[c,l]=a.useState(!1),[d,m]=a.useState(null),h=a.useCallback((async(e,a)=>{try{l(!0),m(null);const s=e||new Date,r=a||new Date(Date.now()+24*t*60*60*1e3),i=await z.obterDisponibilidade(s,r);n(i)}catch(s){const e=s instanceof Error?s.message:"Erro ao carregar disponibilidade";m(e),j({title:"Erro",description:e,variant:"destructive"})}finally{l(!1)}}),[t]),x=a.useCallback((async()=>{try{l(!0),m(null);const e=await z.listarAgendamentos();o(e)}catch(e){const a=e instanceof Error?e.message:"Erro ao carregar agendamentos";m(a),j({title:"Erro",description:a,variant:"destructive"})}finally{l(!1)}}),[]),p=a.useCallback((async e=>{try{if(m(null),!(await z.verificarDisponibilidade(e.data,e.horario)))throw new Error("Hor√°rio n√£o est√° mais dispon√≠vel. Por favor, escolha outro hor√°rio.");const a=await z.criar(e);return o((e=>[a,...e])),await h(),j({title:"Sucesso!",description:"Agendamento criado com sucesso!"}),a}catch(a){const e=a instanceof Error?a.message:"Erro ao criar agendamento";throw m(e),j({title:"Erro",description:e,variant:"destructive"}),a}}),[h]),g=a.useCallback((async e=>{try{await z.confirmar(e),o((a=>a.map((a=>a.id===e?{...a,status:"confirmado"}:a)))),j({title:"Sucesso",description:"Agendamento confirmado!"})}catch(a){const e=a instanceof Error?a.message:"Erro ao confirmar agendamento";j({title:"Erro",description:e,variant:"destructive"})}}),[]),u=a.useCallback((async(e,a)=>{try{await z.cancelar(e,a),o((a=>a.map((a=>a.id===e?{...a,status:"cancelado"}:a)))),await h(),j({title:"Agendamento cancelado",description:"O agendamento foi cancelado com sucesso."})}catch(s){const e=s instanceof Error?s.message:"Erro ao cancelar agendamento";j({title:"Erro",description:e,variant:"destructive"})}}),[h]),f=a.useCallback((async(e,a,s)=>{try{if(!(await z.verificarDisponibilidade(a,s)))throw new Error("Novo hor√°rio n√£o est√° dispon√≠vel. Por favor, escolha outro hor√°rio.");await z.reagendar(e,a,s),o((t=>t.map((t=>t.id===e?{...t,data:a,horario:s,status:"agendado"}:t)))),await h(),j({title:"Sucesso",description:"Agendamento reagendado com sucesso!"})}catch(t){const e=t instanceof Error?t.message:"Erro ao reagendar";j({title:"Erro",description:e,variant:"destructive"})}}),[h]),N=a.useCallback((async(e,a)=>{try{return await z.verificarDisponibilidade(e,a)}catch(s){return!1}}),[]);return{disponibilidade:r,agendamentos:i,loading:c,error:d,carregarDisponibilidade:h,carregarAgendamentos:x,criarAgendamento:p,confirmarAgendamento:g,cancelarAgendamento:u,reagendarAgendamento:f,verificarDisponibilidade:N}}(),[N,b]=a.useState("data"),[y,v]=a.useState(null),[w,D]=a.useState(null),[S,E]=a.useState({nome:"",email:"",telefone:"",tipoServico:"",descricaoProblema:"",equipamento:{tipo:"",marca:"",modelo:""}}),[k,_]=a.useState(null);a.useEffect((()=>{h()}),[h]);const C=()=>{switch(N){case"horario":b("data"),D(null);break;case"dados":b("horario");break;case"confirmacao":b("dados")}};return t?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Carregando disponibilidade..."})]})}):m?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs(x,{className:"max-w-md",children:[e.jsx(p,{className:"h-4 w-4"}),e.jsx(g,{children:m})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(V,{className:"w-8 h-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Agendar Atendimento"}),e.jsx("p",{className:"text-gray-600",children:"Escolha a melhor data e hor√°rio para seu atendimento"})]})]})})})}),e.jsx("div",{className:"bg-white border-b",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"py-4",children:e.jsx("div",{className:"flex items-center justify-between",children:[{key:"data",label:"Data",icon:M},{key:"horario",label:"Hor√°rio",icon:l},{key:"dados",label:"Dados",icon:I},{key:"confirmacao",label:"Confirma√ß√£o",icon:d}].map(((a,s)=>{const t=a.key===N,r=["data","horario"===N||"dados"===N||"confirmacao"===N?"horario":null,"dados"===N||"confirmacao"===N?"dados":null,"confirmacao"===N?"confirmacao":null].includes(a.key),n=a.icon;return e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex items-center space-x-2 "+(t?"text-blue-600":r?"text-green-600":"text-gray-400"),children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center "+(t?"bg-blue-100":r?"bg-green-100":"bg-gray-100"),children:e.jsx(n,{className:"w-4 h-4"})}),e.jsx("span",{className:"font-medium",children:a.label})]}),s<3&&e.jsx("div",{className:"w-12 h-0.5 mx-4 "+(r?"bg-green-300":"bg-gray-200")})]},a.key)}))})})})}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:["data"===N&&e.jsxs(r,{children:[e.jsxs(n,{children:[e.jsxs(i,{className:"flex items-center space-x-2",children:[e.jsx(M,{className:"w-5 h-5"}),e.jsx("span",{children:"Selecione a Data"})]}),e.jsx(u,{children:"Escolha uma data dispon√≠vel para seu atendimento"})]}),e.jsx(o,{children:e.jsx(F,{disponibilidade:s,onSelecionarData:e=>{v(e),b("horario")},dataSelecionada:y})})]}),"horario"===N&&y&&e.jsxs(r,{children:[e.jsxs(n,{children:[e.jsxs(i,{className:"flex items-center space-x-2",children:[e.jsx(l,{className:"w-5 h-5"}),e.jsx("span",{children:"Selecione o Hor√°rio"})]}),e.jsxs(u,{children:["Data selecionada: ",y.toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]}),e.jsxs(o,{children:[e.jsx(L,{data:y,disponibilidade:s,onSelecionarHorario:e=>{D(e),b("dados")},horarioSelecionado:w}),e.jsx("div",{className:"flex justify-between mt-6",children:e.jsx(c,{variant:"outline",onClick:C,children:"Voltar"})})]})]}),"dados"===N&&e.jsxs(r,{children:[e.jsxs(n,{children:[e.jsxs(i,{className:"flex items-center space-x-2",children:[e.jsx(I,{className:"w-5 h-5"}),e.jsx("span",{children:"Seus Dados"})]}),e.jsx(u,{children:"Preencha suas informa√ß√µes para finalizar o agendamento"})]}),e.jsx(o,{children:e.jsx(Q,{dadosIniciais:S,onSubmit:async e=>{E(e);try{const a=await f({data:y,horario:w,...e});_(a),b("confirmacao")}catch(a){}},onVoltar:C,dataSelecionada:y,horarioSelecionado:w})})]}),"confirmacao"===N&&k&&e.jsxs(r,{children:[e.jsxs(n,{children:[e.jsxs(i,{className:"flex items-center space-x-2 text-green-600",children:[e.jsx(d,{className:"w-5 h-5"}),e.jsx("span",{children:"Agendamento Confirmado!"})]}),e.jsx(u,{children:"Seu atendimento foi agendado com sucesso"})]}),e.jsx(o,{children:e.jsx(B,{agendamento:k,onNovoAgendamento:()=>{b("data"),v(null),D(null),E({nome:"",email:"",telefone:"",tipoServico:"",descricaoProblema:"",equipamento:{tipo:"",marca:"",modelo:""}}),_(null)}})})]})]}),e.jsx("div",{className:"bg-white border-t mt-12",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(O,{className:"w-8 h-8 text-blue-600 mx-auto mb-2"}),e.jsx("h3",{className:"font-medium text-gray-900",children:"Endere√ßo"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Rua das Tecnologias, 123",e.jsx("br",{}),"Centro - S√£o Paulo/SP"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(T,{className:"w-8 h-8 text-blue-600 mx-auto mb-2"}),e.jsx("h3",{className:"font-medium text-gray-900",children:"Telefone"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["(11) 9999-9999",e.jsx("br",{}),"(11) 3333-3333"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(l,{className:"w-8 h-8 text-blue-600 mx-auto mb-2"}),e.jsx("h3",{className:"font-medium text-gray-900",children:"Hor√°rio"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Segunda a Sexta: 8h √†s 18h",e.jsx("br",{}),"S√°bado: 8h √†s 12h"]})]})]})})})]})};export{G as default};
